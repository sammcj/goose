"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[2996],{78477:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"guides/multi-model/autopilot","title":"Automatic Multi-Model Switching","description":"The AutoPilot feature enables intelligent, context-aware switching between different models. You simply work naturally with goose, and AutoPilot chooses the right model based on conversation content, complexity, tool usage patterns, and other triggers.","source":"@site/docs/guides/multi-model/autopilot.md","sourceDirName":"guides/multi-model","slug":"/guides/multi-model/autopilot","permalink":"/goose/docs/guides/multi-model/autopilot","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Automatic Multi-Model Switching","sidebar_label":"Automatic Model Switching"},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Model Configuration","permalink":"/goose/docs/guides/multi-model/"},"next":{"title":"Creating Plans","permalink":"/goose/docs/guides/multi-model/creating-plans"}}');var i=n(74848),r=n(28453);const s={sidebar_position:1,title:"Automatic Multi-Model Switching",sidebar_label:"Automatic Model Switching"},l=void 0,d={},c=[{value:"How AutoPilot Works",id:"how-autopilot-works",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Predefined Roles",id:"predefined-roles",level:3},{value:"Custom Roles",id:"custom-roles",level:3}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"The AutoPilot feature enables intelligent, context-aware switching between different models. You simply work naturally with goose, and AutoPilot chooses the right model based on conversation content, complexity, tool usage patterns, and other triggers."}),"\n",(0,i.jsx)(t.admonition,{title:"Experimental Feature",type:"warning",children:(0,i.jsx)(t.p,{children:"AutoPilot is an experimental feature. Behavior and configuration may change in future releases."})}),"\n",(0,i.jsx)(t.h2,{id:"how-autopilot-works",children:"How AutoPilot Works"}),"\n",(0,i.jsx)(t.p,{children:"After you configure which models to use for different roles, AutoPilot handles the rest. During your sessions, it automatically switches to the most appropriate model for your current task\u2014whether you need specialized coding help, complex reasoning, or just want a second opinion."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"For example:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:'When you ask to "debug this error," AutoPilot switches to a model optimized for debugging'}),"\n",(0,i.jsx)(t.li,{children:'When you request "analyze the performance implications," it switches to a model better suited for complex reasoning'}),"\n",(0,i.jsx)(t.li,{children:"When you're doing repetitive coding tasks, it uses a cost-effective model, but escalates to a more powerful one when it encounters failures"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Switching happens automatically based on:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:'The terminology used in your requests ("debug", "analyze", "implement")'}),"\n",(0,i.jsx)(t.li,{children:"How complex the task appears to be"}),"\n",(0,i.jsx)(t.li,{children:"Whether previous attempts have failed and need a different approach"}),"\n",(0,i.jsx)(t.li,{children:"How much autonomous work has been happening without your input"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["When AutoPilot switches to a specialized model, it stays with that model for a configured number of ",(0,i.jsx)("abbr",{title:"A turn is one complete prompt-response interaction between goose and the LLM",style:{textUnderlineOffset:"3px"},children:"turns"})," before evaluating whether to switch back to the base model or to a different specialized model based on the new context."]}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:["You can use ",(0,i.jsx)(t.code,{children:"goose session --debug"})," in goose CLI to see when AutoPilot switches models. Note that each switch applies the provider's rate limits and pricing."]})}),"\n",(0,i.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(t.p,{children:["Add the ",(0,i.jsx)(t.code,{children:"x-advanced-models"})," section to your ",(0,i.jsx)(t.a,{href:"/docs/guides/config-file",children:(0,i.jsx)(t.code,{children:"config.yaml"})})," file and map your model preferences to ",(0,i.jsx)(t.a,{href:"#predefined-roles",children:"predefined"})," or custom roles."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"provider"}),", ",(0,i.jsx)(t.code,{children:"model"})," and ",(0,i.jsx)(t.code,{children:"role"})," parameters are required."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:'# Base provider and model (always available)\nGOOSE_PROVIDER: "anthropic"\nGOOSE_MODEL: "claude-sonnet-4-20250514"\n\n# AutoPilot models\nx-advanced-models:\n- provider: openai\n  model: o1-preview\n  role: deep-thinker\n- provider: openai\n  model: gpt-4o\n  role: debugger\n- provider: anthropic\n  model: claude-opus-4-20250805\n  role: reviewer\n'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Migrate From Lead/Worker Model"})}),"\n",(0,i.jsxs)(t.p,{children:["This example shows how you can reproduce ",(0,i.jsx)(t.a,{href:"/docs/tutorials/lead-worker",children:"lead model"})," behavior using ",(0,i.jsx)(t.code,{children:"x-advanced-models"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:'# Before: Defined lead model using environment variables\n# GOOSE_LEAD_PROVIDER=openai\n# GOOSE_LEAD_MODEL=o1-preview\n\n# After: AutoPilot equivalent\nGOOSE_PROVIDER: "anthropic"\nGOOSE_MODEL: "claude-sonnet-4-20250514"  # Base is used as the worker model\n\nx-advanced-models:\n- provider: openai\n  model: o1-preview\n  role: lead  # Use the predefined lead role (or define a custom role)\n'})}),"\n",(0,i.jsx)(t.h3,{id:"predefined-roles",children:"Predefined Roles"}),"\n",(0,i.jsxs)(t.p,{children:["AutoPilot includes a set of predefined roles defined in ",(0,i.jsx)(t.a,{href:"https://github.com/block/goose/blob/main/crates/goose/src/agents/model_selector/premade_roles.yaml",children:(0,i.jsx)(t.code,{children:"premade_roles.yaml"})})," that goose is aware of by default. Examples include:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"deep-thinker"}),": Activates for complex reasoning tasks"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"debugger"}),": Switches in for error resolution"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"reviewer"}),": Monitors after extensive tool usage"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"coder"}),": Handles code implementation tasks"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"mathematician"}),": Processes mathematical computations"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"custom-roles",children:"Custom Roles"}),"\n",(0,i.jsxs)(t.p,{children:["You can create custom roles with specific triggers by defining them in your ",(0,i.jsx)(t.code,{children:"config.yaml"})," file:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:'x-advanced-models:\n- provider: openai\n  model: gpt-4o\n  role: custom-debugger\n  rules:\n    triggers:\n      keywords: ["bug", "broken", "failing", "crash"]\n      consecutive_failures: 1\n    active_turns: 5\n    priority: 15\n'})}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"Custom Role Configuration Fields"}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Rule Configuration:"})}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter"}),(0,i.jsx)(t.th,{children:"Description"}),(0,i.jsx)(t.th,{children:"Values"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"triggers"})}),(0,i.jsx)(t.td,{children:"Conditions that activate the role"}),(0,i.jsx)(t.td,{children:"Object (see parameters below)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"active_turns"})}),(0,i.jsx)(t.td,{children:"Number of turns the rule stays active once triggered"}),(0,i.jsx)(t.td,{children:"Integer (default: 5)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"priority"})}),(0,i.jsx)(t.td,{children:"Selection priority when multiple roles match"}),(0,i.jsx)(t.td,{children:"Integer (higher wins, default: 0)"})]})]})]}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Trigger Parameters:"})}),(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter"}),(0,i.jsx)(t.th,{children:"Description"}),(0,i.jsx)(t.th,{children:"Values"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"keywords"})}),(0,i.jsx)(t.td,{children:"Words that activate the role"}),(0,i.jsx)(t.td,{children:"Array of strings"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"match_type"})}),(0,i.jsx)(t.td,{children:"How to match keywords"}),(0,i.jsx)(t.td,{children:'"any", "all"'})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"complexity_threshold"})}),(0,i.jsx)(t.td,{children:"Minimum complexity level"}),(0,i.jsx)(t.td,{children:'"low", "medium", "high"'})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"consecutive_failures"})}),(0,i.jsx)(t.td,{children:"Failures in sequence"}),(0,i.jsx)(t.td,{children:"Integer"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"first_turn"})}),(0,i.jsx)(t.td,{children:"Trigger on conversation start"}),(0,i.jsx)(t.td,{children:"Boolean"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"source"})}),(0,i.jsx)(t.td,{children:"Message source filter"}),(0,i.jsx)(t.td,{children:'"human", "machine", "any"'})]})]})]}),(0,i.jsxs)(t.p,{children:["The previous table includes several common rule trigger parameters. For the complete list, see the ",(0,i.jsx)(t.code,{children:"TriggerRules"})," struct in ",(0,i.jsx)(t.a,{href:"https://github.com/block/goose/blob/main/crates/goose/src/agents/model_selector/autopilot.rs",children:(0,i.jsx)(t.code,{children:"autopilot.rs"})}),"."]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var o=n(96540);const i={},r=o.createContext(i);function s(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);